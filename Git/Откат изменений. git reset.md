
#### Есть 3 способа отменить изменения:
- Отменить коммиты (перенос HEAD на N коммитов назад), но оставить файлы в индексе
`--soft`
- Отменить коммиты, убрать файлы из индекса, не тронув изменения в файлах `--mixed`
- Отменить и коммиты, и индекс, и изменения в рабочей директории, откатив состояние рабочей директории до целевого коммита `--hard` (самый опасный способ)

#### --soft
Когда нужно **«склеить» (squash)** несколько мелких или промежуточных коммитов в один большой и аккуратный перед отправкой в общую ветку.

Когда вы делаете `git reset --soft HEAD~N`, вы буквально говорите Git: «Откати историю на N шагов назад, но **оставь весь мой код нетронутым в индексе**».
```bash
git reset --soft HEAD~N
```


#### --mixed
Такой способ отката может понадобиться, чтобы разделить файлы связанные общей логикой по отдельным коммитам. При таком откате HEAD перемещается на N коммитов назад, файлы удаляются из индекса, сохранив изменения. 

 В индекс добавить только те файлы, которые связаны общей логикой работы и сделать коммит. Повторить действия.
```bash
# Очищает индекс
git reset

# Откатывает указатель на 2 коммита назад
git reset HEAD^^

# То же самое через ~N с флагом
git reset --mixed HEAD~2

# Убрать конкетный файл из индекса
git reset page.html style.css 
```

Когда вы выполняете `git reset HEAD~4`, происходят две вещи:
1. **Откат истории:** Указатель вашей ветки (HEAD) перемещается на 4 коммита назад.    
2. **Очистка индекса (Staging Area):** Все изменения из этих четырех удаленных коммитов «вытряхиваются» из индекса.
3. Изменения не удаляются. Они остаются в рабочей директории, но переходят в статус "неиндексированных"

#### --hard
Самая опасная команда, которая:
- Убирает все файлы из индекса
- Полностью стирает все незакомиченные изменения в файлах
благодаря ключу --hard
```bash
git reset --hard
```
Если указать хеш коммита с этим ключом, то все коммиты и изменения после него будут удалены. Но сами коммиты, которые были отменены, не удаляются физически, а остаются в базе данных Git.
```bash
# С указанием id коммита
git reset 1234 --hard

# С указанием относительно HEAD
git reset HEAD^^ --hard
git reset HEAD~2 --hard

# С указанием относительно ветки
git reset feature~2
```


**HEAD** - указывает на тот коммит, где мы находимся сейчас. Это может быть `detached head mode`.
**ORIG_HEAD** - указывает на предыдущее положение головы.
Если вы совершили ошибку, откатившись на слишком ранний коммит, то не все потеряно. Найти поздние коммиты можно с помощью git reflog, но и можно вернуться на последний коммит, где находился HEAD. На него указывает ORIG_HEAD.
И здесь можно поступить двумя способами.
#### Способ 1.
В detouched mode вернуть голову на прежнее место
```
git checkout ORIG_HEAD
```
Но в этом случае мы просто оказываемся на предыдущем коммите, который был отменен, и можем читать файлы, но сама ветка остается на коммите, к которому  мы откатились. Она не следует за HEAD.

#### Способ 2.
Можно сделать еще один откат, только указать тот коммит, который нам нужен. Если нам нужен предыдущий (ORIG_HEAD), то:
```
git reset --hard ORIG_HEAD
```


